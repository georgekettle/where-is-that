<% number_of_pins = @location.pins.count %>
<%= turbo_frame_tag dom_id_for_records(@location, prefix:"popup"), target: "_top" do %>
  <%= link_to location_path(@location) do %>
    <div class="aspect-h-6 aspect-w-9 w-56">
      <div class="grid grid-cols-3 grid-rows-2 gap-0.5 rounded-md overflow-hidden">
        <!-- ... -->
        <div class="row-span-2 col-span-2 bg-gray-100">
          <%= cl_image_tag(@location.pins.first.photos.first.key, class: 'object-cover h-full w-full') if number_of_pins >= 1 %>
        </div>
        <div class="h-full w-full row-span-1 bg-gray-100">
          <%= cl_image_tag(@location.pins.second.photos.first.key, class: 'object-cover h-full w-full') if number_of_pins >= 2 %>
        </div>
        <div class="h-full w-full row-span-1 bg-gray-100">
          <%= cl_image_tag(@location.pins.third.photos.first.key, class: 'object-cover h-full w-full') if number_of_pins >= 3 %>
        </div>
      </div>
    </div>
    <h4 class="font-semibold"><%= @location.address %></h4>
    <p class="text-xs text-gray-400"><%= @location.pins.count %> pins</p>
  <% end %>
<% end %>